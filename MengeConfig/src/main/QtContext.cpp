#include "QtContext.h"
#include "ContextManager.hpp"

#include <cassert>


/////////////////////////////////////////////////////////////////////////////////////////////
//						Implementation of QtContext
/////////////////////////////////////////////////////////////////////////////////////////////

QtContext::QtContext() {
	ContextManager * mgr = ContextManager::instance();
	size_t id = mgr->registerContext(this);
	assert(id != 0 && "Context registration produced invalid id");
}

/////////////////////////////////////////////////////////////////////////////////////////////

QtContext::~QtContext() {
	ContextManager::instance()->unregisterContext(this);
	// TOOD: Need to handle the widget that belongs to this context.
}

/////////////////////////////////////////////////////////////////////////////////////////////

void QtContext::drawGL(int vWidth, int vHeight) {
	// Weird that this isn't handled by the base class.
	draw3DGL();
	drawUIGL(vWidth, vHeight);
}

/////////////////////////////////////////////////////////////////////////////////////////////